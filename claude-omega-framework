# CONFIGURACIÓN PARA CLAUDE CODE - OMEGAFRAMEWORK
# Usar este archivo como contexto al trabajar con Claude Code

## PROYECTO
- Nombre: OmegaFramework
- Tipo: SSJS Framework para Salesforce Marketing Cloud
- Repo: https://github.com/oskyar/miniframework-ssjs
- Lenguaje: SSJS (ES5 only - NO ES6+)

## ESTRUCTURA DE AGENTES DISPONIBLES

Los siguientes archivos contienen las instrucciones para cada rol:

1. **agent-architect.md** - Para decisiones de diseño y arquitectura
2. **agent-developer.md** - Para implementación de código SSJS
3. **agent-validator.md** - Para validación de compatibilidad SFMC
4. **agent-documenter.md** - Para documentación y testing
5. **orchestrator.md** - Para coordinar flujos completos

## CÓMO USAR CON CLAUDE CODE

### Método 1: Referencia Explícita (RECOMENDADO para Claude Code)

Cuando uses `claude` en terminal, incluye el contexto del agente:

```bash
# Para análisis arquitectónico
claude chat "
Contexto: Soy parte del desarrollo de OmegaFramework (miniframework SSJS para SFMC).

Rol: Actúa como el Agente Arquitecto siguiendo las instrucciones del archivo 'agent-architect.md' en la raíz del proyecto.

Tarea: Analiza el archivo core/ConnectionHandler.ssjs y propón 3 mejoras arquitectónicas priorizadas considerando:
- Limitaciones de SSJS (ES5 only)
- Entorno stateless de SFMC
- Rate limits y timeouts

Formato de salida: Proporciona cada mejora con ID (ARCH-XXX), descripción, beneficios, y especificación técnica.
"
```

### Método 2: Archivo de Instrucciones

Crea un archivo para cada tarea específica:

```bash
# task-001-analyze-connection-handler.md
Contexto del proyecto: OmegaFramework (SSJS para SFMC)
Agente: Arquitecto (agent-architect.md)
Tarea: Analizar y proponer mejoras a core/ConnectionHandler.ssjs

# Luego úsalo
claude chat < task-001-analyze-connection-handler.md
```

### Método 3: Script de Workflow

Crea un script para flujos completos:

```bash
#!/bin/bash
# workflow-module-registry.sh

echo "=== FASE 1: ARQUITECTURA ==="
claude chat "Rol: Arquitecto (agent-architect.md). Diseña Module Registry para OmegaFramework."

echo "=== FASE 2: DESARROLLO ==="
claude chat "Rol: Desarrollador (agent-developer.md). Implementa el diseño anterior de Module Registry."

echo "=== FASE 3: VALIDACIÓN ==="
claude chat "Rol: Validador (agent-validator.md). Valida la implementación del Module Registry."

echo "=== FASE 4: DOCUMENTACIÓN ==="
claude chat "Rol: Documentador (agent-documenter.md). Documenta el Module Registry."
```

## FLUJO RECOMENDADO

### Para una nueva feature completa:

1. **INICIO** - Define la mejora:
   ```
   Quiero implementar: [descripción de la feature]
   ```

2. **ARQUITECTURA** - Usa Agente Arquitecto:
   ```bash
   claude chat "Rol: Arquitecto. Diseña [feature] para OmegaFramework."
   ```

3. **DESARROLLO** - Usa Agente Desarrollador:
   ```bash
   claude chat "Rol: Desarrollador. Implementa ARCH-XXX del diseño anterior."
   ```

4. **VALIDACIÓN** - Usa Agente Validador:
   ```bash
   claude chat "Rol: Validador SFMC. Valida IMPL-XXX para producción."
   ```

5. **DOCUMENTACIÓN** - Usa Agente Documentador:
   ```bash
   claude chat "Rol: Documentador. Documenta el código validado IMPL-XXX."
   ```

### Para análisis rápido:

```bash
claude chat "Rol: Arquitecto. Revisa [archivo] y dame quick wins."
```

### Para fix de bugs:

```bash
claude chat "Rol: Desarrollador. Fix bug en [archivo]: [descripción]."
claude chat "Rol: Validador. Verifica el fix anterior."
```

## VARIABLES DE ENTORNO ÚTILES

Agrega a tu .bashrc o .zshrc:

```bash
export OMEGA_ROOT="/path/to/miniframework-ssjs"
export OMEGA_AGENT_ARCHITECT="$OMEGA_ROOT/agent-architect.md"
export OMEGA_AGENT_DEVELOPER="$OMEGA_ROOT/agent-developer.md"
export OMEGA_AGENT_VALIDATOR="$OMEGA_ROOT/agent-validator.md"
export OMEGA_AGENT_DOCUMENTER="$OMEGA_ROOT/agent-documenter.md"

# Alias útiles
alias omega-architect='claude chat "Rol: Arquitecto (agent-architect.md)."'
alias omega-dev='claude chat "Rol: Desarrollador (agent-developer.md)."'
alias omega-validate='claude chat "Rol: Validador (agent-validator.md)."'
alias omega-doc='claude chat "Rol: Documentador (agent-documenter.md)."'
```

## TIPS PARA CLAUDE CODE

1. **Sé específico con el rol**: Siempre indica qué agente debe actuar
2. **Referencia archivos**: Claude Code tiene acceso a tu filesystem
3. **Usa comandos de archivo**: `@file:agent-architect.md` si está disponible
4. **Itera en la misma sesión**: Mantén la conversación para contexto
5. **Guarda outputs**: Redirige a archivos para tracking

## ESTRUCTURA DE PROMPT ÓPTIMA

```
[CONTEXTO]
Proyecto: OmegaFramework
Framework: SSJS para Salesforce Marketing Cloud
Restricciones: ES5 only, stateless execution, Data Extensions para persistencia

[ROL]
Actúa como: [Arquitecto|Desarrollador|Validador|Documentador]
Referencia: [agent-*.md correspondiente]

[TAREA]
[Descripción clara de lo que necesitas]

[FORMATO DE SALIDA]
[Cómo quieres recibir la respuesta]
```

## EJEMPLOS PRÁCTICOS

### Ejemplo 1: Análisis completo de un módulo
```bash
claude chat "
Contexto: OmegaFramework (SSJS/SFMC)
Rol: Arquitecto (agent-architect.md)

Analiza core/DataExtensionTokenCache.ssjs y propón:
1. Mejoras de performance
2. Mejor error handling
3. Optimización de queries a DE

Output: Lista priorizada con specs técnicas.
"
```

### Ejemplo 2: Implementar mejora específica
```bash
claude chat "
Contexto: OmegaFramework
Rol: Desarrollador (agent-developer.md)

Implementa circuit breaker pattern en ConnectionHandler.ssjs:
- Detectar fallos consecutivos
- Pausar requests temporalmente
- Reintento gradual
- Compatible con código existente

Output: Código completo con ejemplos de uso.
"
```

### Ejemplo 3: Validación rápida
```bash
claude chat "
Contexto: OmegaFramework
Rol: Validador (agent-validator.md)

Valida este código para SFMC:

\`\`\`javascript
[tu código aquí]
\`\`\`

Output: Pass/Fail con lista de issues y recomendaciones.
"
```

## TROUBLESHOOTING

### Problema: Claude no encuentra los archivos
**Solución**: 
```bash
# Verifica que Claude Code pueda acceder al directorio
cd /path/to/miniframework-ssjs
claude chat --cwd $(pwd) "Lista los archivos agent-*.md"
```

### Problema: Claude no sigue el rol correctamente
**Solución**: Sé más explícito:
```bash
claude chat "
IMPORTANTE: Actúa EXCLUSIVAMENTE como el Agente [X].
Lee y sigue TODAS las instrucciones del archivo agent-[x].md.
No mezcles comportamientos de otros agentes.

[tu tarea aquí]
"
```

### Problema: Necesito contexto de sesión anterior
**Solución**: Guarda las respuestas y referencialas:
```bash
# Sesión 1
claude chat "..." > output-architect.md

# Sesión 2 (referencia la anterior)
claude chat "
Basándote en el análisis arquitectónico en output-architect.md,
actúa como Desarrollador e implementa ARCH-001.
"
```

## PRÓXIMOS PASOS

1. Prueba un análisis simple:
   ```bash
   claude chat "Rol: Arquitecto. Analiza el README.md del OmegaFramework."
   ```

2. Si funciona, prueba un flujo completo con una mejora pequeña

3. Ajusta el formato de prompts según tus resultados

---

¿Necesitas ayuda configurando algo específico o quieres que te muestre un ejemplo de uso completo?
